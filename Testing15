package com.firstwap.middleware.scheduler;

import java.util.Date;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.stereotype.Component;

import com.firstwap.middleware.ejb.scheduling.DispatchSchedulingBean;
import com.firstwap.middleware.ejb.scheduling.SchedulingBean;


/**
 *
 * @author arief.rakhman
 */
@Component
public class DispatchScheduler implements BeanFactoryAware {

	private BeanFactory beanFactory;
    
    private Logger logger = LoggerFactory.getLogger(DispatchScheduler.class);
   
    public void executeJob() {
        
        logger.debug("start job Dispatch on {}.", new Date());
        
        SchedulingBean dispatch = (SchedulingBean) beanFactory.getBean(DispatchSchedulingBean.class);
        dispatch.schedule();
		
		logger.debug("finish job Dispatch on {}.", new Date());
    }

	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {

		this.beanFactory = beanFactory;
	}
}
