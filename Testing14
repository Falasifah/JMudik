package com.firstwap.middleware.scheduler;

import java.util.Date;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.stereotype.Component;

import com.firstwap.middleware.ejb.scheduling.DeliverySchedulingBean;
import com.firstwap.middleware.ejb.scheduling.SchedulingBean;


/**
 *
 * @author arief.rakhman
 */
@Component
public class DeliveryScheduler implements BeanFactoryAware {

	private BeanFactory beanFactory;
    
    private Logger logger = LoggerFactory.getLogger(DeliveryScheduler.class);
    
    public void executeJob() {
        
        logger.debug("start job Delivery on {}.", new Date());
        
        SchedulingBean delivery = (SchedulingBean) beanFactory.getBean(DeliverySchedulingBean.class);
        delivery.schedule();
		
		logger.debug("finish job Delivery on {}.", new Date());
    }

	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {

		this.beanFactory = beanFactory;
	}
}
